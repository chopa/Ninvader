<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>
var gunX = 250;
function clickLeft(){
  var c =document.getElementById("gun");
  if (c != null){
    gunX = gunX - 50;
    c.style.left = gunX;
  }
}

function clickRight(){
  var c =document.getElementById("gun");
  if (c != null){
    gunX = gunX + 50;
    c.style.left = gunX;
  }
}

function keyDown(e){
  // alert("code:" +e.keyCode);
  if(e.keyCode ==32){
    clickFire();
  }
  if(e.keyCode ==37){
    clickLeft();
  }
  if(e.keyCode ==39){
    clickRight();
  }
}

document.addEventListener("keydown",keyDown);

function makeBullet(){
  var e = document.createElement("pre");
  e.innerHTML ="疲れた";
  e.style.position = "absolute";
  e.style.top = 320
  e.style.left = gunX;
  document.body.appendChild(e);
  return e;
}

function makeBomb(){
  var e = document.createElement("pre");
  var t = document.getElementById("Target");
  var x = parseInt(t.style.left);
  var y = parseInt(t.style.top);
  e.innerHTML ="睡魔";
  e.style.position = "absolute";
  e.style.top = y;
  e.style.left = x;
  document.body.appendChild(e);
  return e;
}

var bullet = null; //初期値はnull(空)
var bomb = null;

function clickFire(){
  if (bullet != null) {
    document.body.removeChild(bullet);
  }
  bullet = makeBullet();
}

var timer;

function move(){

  var t = document.getElementById("Target");
  var x = parseInt(t.style.left);
  var y = parseInt(t.style.top);
  t.style.left = x + 50;
  if (x > 600){
    t.style.left = 50;
    t.style.top = y + 30;
  }
  if (bullet !=null){
    var bx = parseInt(bullet.style.left);
    var by = parseInt(bullet.style.top);
    bullet.style.top = by - 10;
    if (parseInt(bullet.style.top)<0){
      document.body.removeChild(bullet);
      bullet = null;
    }
    if (bx <= x && x <= bx + 100 && by <= y && y <= by + 80 ){
      document.body.removeChild(t);
      clearInterval(timer);
    }
  }

  if (bomb !=null){
    var bx = parseInt(bomb.style.left);
    var by = parseInt(bomb.style.top);
    bomb.style.top = by + 15;
    if (parseInt(bomb.style.top) > 480){
      document.body.removeChild(bomb);
      bomb = null;
    }
    var gt = document.getElementById("gun");
    var gx = parseInt(gt.style.left);
    var gy = parseInt(gt.style.top);

    if (bx <= gx && gx <= bx + 75 && by <= gy && gy <= by + 30 ){
      document.body.removeChild(gt);
      clearInterval(timer);
    }
  }
  if (y > 350){
      clearInterval(timer);
  }

  var r = Math.floor(Math.random() * 10);
  if (r == 0 && bomb == null){
    bomb = makeBomb();
  }
}



</script>
</head>
<body bgcolor="9370db" onload="timer = setInterval('move()',100)">
<pre
style="position:absolute;left:300px;top:350px;"id = "gun">
 ●●●
●● ●●
 ●●●
</pre>
<pre style="position:absolute;left:50px;top:400px;"id = "left" onclick = "clickLeft();">
  ♡♡♡
  ♡♡♡
  ♡♡♡
</pre>
<pre style ="position:absolute;left:550px;top:400px;"id = "Right" onclick = "clickRight();">
  ⭐︎⭐︎⭐︎
  ⭐︎⭐︎⭐︎
  ⭐︎⭐︎⭐︎
</pre>
<pre style = "position:absolute;Left:300px;top:500px;"id = "fire" onclick="clickFire();
">
 眠い
</pre>

<pre style="position:absolute;left:50px;top:10px;" id="Target">
  睡眠 睡眠
  睡眠 睡眠
  睡眠 睡眠
</pre>
</body>
</html>
